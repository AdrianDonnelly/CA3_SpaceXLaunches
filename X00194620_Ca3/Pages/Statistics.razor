@page "/statistics"

<PageTitle>Launch Statistics</PageTitle>

<MudContainer Class="mt-8">
    <MudText Typo="Typo.h4" GutterBottom="true">Launch Statistics</MudText>

    @if (loading)
    {
        <div class="d-flex justify-center align-center" style="min-height: 400px;">
            <MudProgressCircular Indeterminate="true" Size="Size.Large" />
        </div>
    }
    else if (launches == null || !launches.Any())
    {
        <MudAlert Severity="Severity.Info">No launch data available</MudAlert>
    }
    else
    {
        <!-- Summary Cards -->
        <MudGrid Spacing="3" Class="mb-6">
            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudText Typo="Typo.h6" Color="Color.Primary">Total Launches</MudText>
                    <MudText Typo="Typo.h3">@TotalLaunches</MudText>
                </MudPaper>
            </MudItem>

            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudText Typo="Typo.h6" Color="Color.Success">Successful</MudText>
                    <MudText Typo="Typo.h3">@SuccessfulLaunches</MudText>
                </MudPaper>
            </MudItem>

            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudText Typo="Typo.h6" Color="Color.Error">Failed</MudText>
                    <MudText Typo="Typo.h3">@FailedLaunches</MudText>
                </MudPaper>
            </MudItem>

            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudText Typo="Typo.h6" Color="Color.Warning">Unknown</MudText>
                    <MudText Typo="Typo.h3">@UnknownLaunches</MudText>
                </MudPaper>
            </MudItem>
        </MudGrid>

        <!-- Charts -->
        <MudGrid Spacing="3">
            <!-- Launch Outcomes Pie Chart -->
            <MudItem xs="12" md="6">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudText Typo="Typo.h6" Class="mb-4">Launch Outcomes</MudText>
                    <MudText Typo="Typo.body2" Color="Color.Inherit">@SuccessRate% success rate</MudText>
                    <MudChart ChartType="ChartType.Donut"
                              InputData="@OutcomeData"
                              InputLabels="@OutcomeLabels"
                              Width="100%"
                              Height="350px"
                              ChartOptions="@outcomeChartOptions" />

                </MudPaper>
                
            </MudItem>

            <!-- Launches Per Year Bar Chart -->
            <MudItem xs="12" md="6">
                <MudPaper Class="pa-4" Elevation="2">
                    <MudText Typo="Typo.h6" Class="mb-4">Launches Per Year</MudText>
                    <MudChart ChartType="ChartType.Bar"
                              ChartSeries="@LaunchesPerYearSeries"
                              XAxisLabels="@YearLabels"
                              Width="100%"
                              Height="350px"
                              ChartOptions="@barChartOptions" />
                </MudPaper>
            </MudItem>
            
        </MudGrid>
    }
</MudContainer>

